#!/bin/bash

sudo sh -c "echo '140.82.114.3 github.com\n185.199.108.153 assets-cdn.github.com\n199.232.69.194 github.global.ssl.fastly.net\n151.101.0.133 raw.githubusercontent.com' >> /etc/hosts" && sleep 1

read -p "回车更新，z拉取脚本(y/z)" choice

if [[ "$choice" == "y" || "$choice" == "" ]]; then
  echo "开始执行脚本..."
  # 检查是否可以连接到 GitHub 的服务器
  if ping -c 1 github.com &> /dev/null; then
    if bash -c "$(curl -L raw.githubusercontent.com/xiezh123/132/main/6.sh)"; then
      echo "脚本执行完毕。"
    else
      echo "脚本执行失败，请检查网络连接和脚本内容。"
    fi
  else
    echo "无法连接到 GitHub 的服务器，请检查您的网络连接和 DNS 解析设置。"
  fi
elif [[ "$choice" == "z" ]]; then
  echo "确保您的网络连接正常，并且 DNS 解析正确。您可以尝试使用 ping 命令来测试是否可以连接到 GitHub的服务器。"
  if curl -sSL https://github.com/xiezh123/132/raw/main/1 -o /usr/local/bin/z && sudo chmod +x /usr/local/bin/z; then
    sleep 3
    if [[ -f "/usr/local/bin/z" ]]; then
      echo "拉取完成。终端输入z执行脚本"
    else
      echo "命令执行失败，请检查网络连接和命令内容。"
    fi
  else
    echo "命令执行失败，请检查网络连接和命令内容。"
  fi
else
  echo "无效的选项：$choice"
fi
